{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from'react';import MayMay from'../img/MEME.gif';import axios from'axios';function Login(_ref){var bearer=_ref.bearer,setBearer=_ref.setBearer,setCurrentPage=_ref.setCurrentPage,setUserEmail=_ref.setUserEmail,userEmail=_ref.userEmail,setUserPassword=_ref.setUserPassword,userPassword=_ref.userPassword,userInfo=_ref.userInfo,setUserInfo=_ref.setUserInfo,currentPage=_ref.currentPage;function handleSubmit(event){event.preventDefault();var headers={Accept:\"application/json\",'Content-Type':'application/json;charset=UTF-8'};axios({url:\"https://cors-anywhere.herokuapp.com/http://meme-oir.herokuapp.com/v1/oauth/token\",method:\"post\",data:{grant_type:\"password\",client_id:\"2\",client_secret:\"kRZzELjTaLhjjumF6BIzOdXDgNP4bl2zeqxJRysZ\",password:userPassword,username:userEmail,scope:\"\"},headers:headers}).then(function(res){return setBearer(function(prevBearer){return prevBearer=res.data.access_token;});}).catch(function(err){return console.log('error: ',err);});}useEffect(function(){console.log(bearer);{bearer.length>1&&axios({url:\"https://cors-anywhere.herokuapp.com/http://meme-oir.herokuapp.com/api/user\",method:\"get\",headers:{Accept:\"application/json\",Authorization:\"Bearer \".concat(bearer)}}).then(function(response){// if response is good\nconsole.log(response);if(response!==\"\"){setUserInfo(function(previnfo){return previnfo=response.data;});}}).catch(function(err){return console.log('error: ',err);});}},[bearer]);useEffect(function(){if(userInfo!==\"\"){userInfo&&setCurrentPage(function(prevpage){return prevpage='templates';});}},[userInfo]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container border bg-success py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 col-md-4 text-center py-4\",children:/*#__PURE__*/_jsx(\"img\",{src:MayMay,className:\"img-fluid\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 col-md-8 col-sm-10 mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container border text-center text-primary\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"logo py-4\",style:{fontSize:\"6vw\"},children:\"MEME\\xB7 oir\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"hint py-4\",children:/*#__PURE__*/_jsx(\"b\",{children:\"E m a i l\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",onChange:function onChange(e){return setUserEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\" hint py-4\",children:/*#__PURE__*/_jsx(\"b\",{children:\"P a s s w o r d\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"password\",onChange:function onChange(e){return setUserPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"button my-4 btn btn-primary text-white\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button my-4 btn btn-primary text-white\",onClick:function onClick(){return setCurrentPage('register');},children:\"Register Account\"})]})})]})})});}export default Login;","map":{"version":3,"sources":["/Users/ryankelly/Sites/aotc_project/aotc_react/src/components/login.js"],"names":["React","useEffect","MayMay","axios","Login","bearer","setBearer","setCurrentPage","setUserEmail","userEmail","setUserPassword","userPassword","userInfo","setUserInfo","currentPage","handleSubmit","event","preventDefault","headers","Accept","url","method","data","grant_type","client_id","client_secret","password","username","scope","then","res","prevBearer","access_token","catch","err","console","log","length","Authorization","response","previnfo","prevpage","fontSize","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport MayMay from '../img/MEME.gif'\nimport axios from 'axios';\n\nfunction Login({ bearer, setBearer, setCurrentPage, setUserEmail, userEmail, setUserPassword, userPassword, userInfo, setUserInfo, currentPage }) {\n    function handleSubmit(event) {\n        event.preventDefault();\n        const headers = {\n            Accept: \"application/json\",\n            'Content-Type': 'application/json;charset=UTF-8',\n        }\n\n        axios({\n            url: \"https://cors-anywhere.herokuapp.com/http://meme-oir.herokuapp.com/v1/oauth/token\",\n            method: \"post\",\n            data: {\n                grant_type: \"password\",\n                client_id: \"2\",\n                client_secret: \"kRZzELjTaLhjjumF6BIzOdXDgNP4bl2zeqxJRysZ\",\n                password: userPassword,\n                username: userEmail,\n                scope: \"\"\n            },\n            headers,\n        })\n\n            .then(res => setBearer(prevBearer => prevBearer = res.data.access_token))\n            .catch(err => console.log('error: ', err))\n    }\n\n    useEffect(() => {\n        console.log(bearer)\n        {\n            bearer.length > 1 &&\n                axios({\n                    url: \"https://cors-anywhere.herokuapp.com/http://meme-oir.herokuapp.com/api/user\",\n                    method: \"get\",\n                    headers: {\n                        Accept: \"application/json\",\n                        Authorization: `Bearer ${bearer}`\n                    }\n                })\n                    .then(response => {\n                        // if response is good\n                        console.log(response)\n                        if (response !== \"\") {\n                            setUserInfo(previnfo => previnfo = response.data);\n\n                        }\n\n                    })\n                    .catch(err => console.log('error: ', err))\n\n        }\n    }, [bearer])\n\n    useEffect(() => {\n        if (userInfo !== \"\") { userInfo && setCurrentPage(prevpage => prevpage = 'templates') }\n    }, [userInfo])\n\n    return (\n        <div>\n            <div className=\"container border bg-success py-4\">\n                <div className=\"row mx-auto\">\n                    <div className=\"col-lg-6 col-md-4 text-center py-4\">\n                        <img src={MayMay} className=\"img-fluid\" alt=\"\" />\n                    </div>\n                    <div className=\"col-lg-6 col-md-8 col-sm-10 mx-auto\">\n                        <div className=\"container border text-center text-primary\">\n                            <h1 className=\"logo py-4\" style={{ fontSize: \"6vw\" }}>MEMEÂ· oir</h1>\n                            <form onSubmit={e => handleSubmit(e)}>\n                                <label htmlFor=\"email\" className=\"hint py-4\"><b>E m a i l</b></label><br />\n                                <input\n                                    type=\"email\"\n                                    className=\"form-control\"\n                                    aria-describedby=\"emailHelp\"\n                                    placeholder=\"Enter email\"\n                                    onChange={e => setUserEmail(e.target.value)}\n                                />\n                                <br />\n                                <label htmlFor=\"password\" className=\" hint py-4\"><b>P a s s w o r d</b></label><br />\n                                <input\n                                    type=\"password\"\n                                    className=\"form-control\"\n                                    placeholder=\"password\"\n                                    onChange={e => setUserPassword(e.target.value)}\n                                />\n                                <br />\n                                <button className=\"button my-4 btn btn-primary text-white\">Submit</button><br />\n                            </form>\n                            <button className=\"button my-4 btn btn-primary text-white\" onClick={() => setCurrentPage('register')}>Register Account</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}